import{g as rt,r as s,_ as Re,d as st,f as it,h as at,i as ct,k as lt,l as ut,m as ft,n as dt,T as ht,o as mt,q as Z,u as te,v as pt,w as Ge,D as bt,O as ge,P as Ee,x as vt,y as Te,z as gt,Q as We,S as Ue,A as K,M as he,F as me,j as ne}from"./index-9df6dc31.js";function ze(n,o,r){var e,c,u,v,l;o==null&&(o=100);function a(){var f=Date.now()-v;f<o&&f>=0?e=setTimeout(a,o-f):(e=null,r||(l=n.apply(u,c),u=c=null))}var R=function(){u=this,c=arguments,v=Date.now();var f=r&&!e;return e||(e=setTimeout(a,o)),f&&(l=n.apply(u,c),u=c=null),l};return R.clear=function(){e&&(clearTimeout(e),e=null)},R.flush=function(){e&&(l=n.apply(u,c),u=c=null,clearTimeout(e),e=null)},R}ze.debounce=ze;var Et=ze;const Ze=rt(Et);function yt(n){let{debounce:o,scroll:r,polyfill:e,offsetSize:c}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const u=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!u)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[v,l]=s.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=s.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:v}),R=o?typeof o=="number"?o:o.scroll:null,f=o?typeof o=="number"?o:o.resize:null,b=s.useRef(!1);s.useEffect(()=>(b.current=!0,()=>void(b.current=!1)));const[F,_,L]=s.useMemo(()=>{const E=()=>{if(!a.current.element)return;const{left:D,top:T,width:y,height:h,bottom:z,right:p,x:g,y:B}=a.current.element.getBoundingClientRect(),w={left:D,top:T,width:y,height:h,bottom:z,right:p,x:g,y:B};a.current.element instanceof HTMLElement&&c&&(w.height=a.current.element.offsetHeight,w.width=a.current.element.offsetWidth),Object.freeze(w),b.current&&!Mt(a.current.lastBounds,w)&&l(a.current.lastBounds=w)};return[E,f?Ze(E,f):E,R?Ze(E,R):E]},[l,c,R,f]);function C(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",L,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null)}function j(){a.current.element&&(a.current.resizeObserver=new u(L),a.current.resizeObserver.observe(a.current.element),r&&a.current.scrollContainers&&a.current.scrollContainers.forEach(E=>E.addEventListener("scroll",L,{capture:!0,passive:!0})))}const S=E=>{!E||E===a.current.element||(C(),a.current.element=E,a.current.scrollContainers=Qe(E),j())};return wt(L,!!r),Pt(_),s.useEffect(()=>{C(),j()},[r,L,_]),s.useEffect(()=>C,[]),[S,v,F]}function Pt(n){s.useEffect(()=>{const o=n;return window.addEventListener("resize",o),()=>void window.removeEventListener("resize",o)},[n])}function wt(n,o){s.useEffect(()=>{if(o){const r=n;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[n,o])}function Qe(n){const o=[];if(!n||n===document.body)return o;const{overflow:r,overflowX:e,overflowY:c}=window.getComputedStyle(n);return[r,e,c].some(u=>u==="auto"||u==="scroll")&&o.push(n),[...o,...Qe(n.parentElement)]}const xt=["x","y","top","bottom","left","right","width","height"],Mt=(n,o)=>xt.every(r=>n[r]===o[r]);var Ot=Object.defineProperty,Tt=Object.defineProperties,Rt=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,Xe=(n,o,r)=>o in n?Ot(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,Ve=(n,o)=>{for(var r in o||(o={}))jt.call(o,r)&&Xe(n,r,o[r]);if(Be)for(var r of Be(o))Ct.call(o,r)&&Xe(n,r,o[r]);return n},St=(n,o)=>Tt(n,Rt(o));function Je(n,o,r){if(!n)return;if(r(n)===!0)return n;let e=o?n.return:n.child;for(;e;){const c=Je(e,o,r);if(c)return c;e=o?null:e.sibling}}function et(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Ne=et(s.createContext(null));class tt extends s.Component{render(){return s.createElement(Ne.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:$e,ReactCurrentDispatcher:Ke}=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Lt(){const n=s.useContext(Ne);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const o=s.useId();return s.useMemo(()=>{for(const e of[$e==null?void 0:$e.current,n,n==null?void 0:n.alternate]){if(!e)continue;const c=Je(e,!1,u=>{let v=u.memoizedState;for(;v;){if(v.memoizedState===o)return!0;v=v.next}});if(c)return c}},[n,o])}function Dt(){var n,o;const r=Lt(),[e]=s.useState(()=>new Map);e.clear();let c=r;for(;c;){const u=(n=c.type)==null?void 0:n._context;u&&u!==Ne&&!e.has(u)&&e.set(u,(o=Ke==null?void 0:Ke.current)==null?void 0:o.readContext(et(u))),c=c.return}return e}function At(){const n=Dt();return s.useMemo(()=>Array.from(n.keys()).reduce((o,r)=>e=>s.createElement(o,null,s.createElement(r.Provider,St(Ve({},e),{value:n.get(r)}))),o=>s.createElement(tt,Ve({},o))),[n])}const _e={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _t(n){const{handlePointer:o}=mt(n);return{priority:1,enabled:!0,compute(r,e,c){e.pointer.set(r.offsetX/e.size.width*2-1,-(r.offsetY/e.size.height)*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(_e).reduce((r,e)=>({...r,[e]:o(e)}),{}),update:()=>{var r;const{events:e,internal:c}=n.getState();(r=c.lastEvent)!=null&&r.current&&e.handlers&&e.handlers.onPointerMove(c.lastEvent.current)},connect:r=>{var e;const{set:c,events:u}=n.getState();u.disconnect==null||u.disconnect(),c(v=>({events:{...v.events,connected:r}})),Object.entries((e=u.handlers)!=null?e:[]).forEach(([v,l])=>{const[a,R]=_e[v];r.addEventListener(a,l,{passive:R})})},disconnect:()=>{const{set:r,events:e}=n.getState();if(e.connected){var c;Object.entries((c=e.handlers)!=null?c:[]).forEach(([u,v])=>{if(e&&e.connected instanceof HTMLElement){const[l]=_e[u];e.connected.removeEventListener(l,v)}}),r(u=>({events:{...u.events,connected:void 0}}))}}}}const zt=s.forwardRef(function({children:o,fallback:r,resize:e,style:c,gl:u,events:v=_t,eventSource:l,eventPrefix:a,shadows:R,linear:f,flat:b,legacy:F,orthographic:_,frameloop:L,dpr:C,performance:j,raycaster:S,camera:E,onPointerMissed:D,onCreated:T,...y},h){s.useMemo(()=>st(ht),[]);const z=At(),[p,g]=yt({scroll:!0,debounce:{scroll:50,resize:0},...e}),B=s.useRef(null),w=s.useRef(null);s.useImperativeHandle(h,()=>B.current);const oe=it(D),[ie,le]=s.useState(!1),[O,Y]=s.useState(!1);if(ie)throw ie;if(O)throw O;const M=s.useRef(null);at(()=>{const H=B.current;g.width>0&&g.height>0&&H&&(M.current||(M.current=ct(H)),M.current.configure({gl:u,events:v,shadows:R,linear:f,flat:b,legacy:F,orthographic:_,frameloop:L,dpr:C,performance:j,raycaster:S,camera:E,size:g,onPointerMissed:(...k)=>oe.current==null?void 0:oe.current(...k),onCreated:k=>{k.events.connect==null||k.events.connect(l?lt(l)?l.current:l:w.current),a&&k.setEvents({compute:(q,I)=>{const W=q[a+"X"],re=q[a+"Y"];I.pointer.set(W/I.size.width*2-1,-(re/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),T==null||T(k)}}),M.current.render(s.createElement(z,null,s.createElement(ut,{set:Y},s.createElement(s.Suspense,{fallback:s.createElement(ft,{set:le})},o)))))}),s.useEffect(()=>{const H=B.current;if(H)return()=>dt(H)},[]);const ae=l?"none":"auto";return s.createElement("div",Re({ref:w,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...c}},y),s.createElement("div",{ref:p,style:{width:"100%",height:"100%"}},s.createElement("canvas",{ref:B,style:{display:"block"}},r)))}),It=s.forwardRef(function(o,r){return s.createElement(tt,null,s.createElement(zt,Re({},o,{ref:r})))}),ye=new Z,ke=new Z,Nt=new Z;function kt(n,o,r){const e=ye.setFromMatrixPosition(n.matrixWorld);e.project(o);const c=r.width/2,u=r.height/2;return[e.x*c+c,-(e.y*u)+u]}function Ft(n,o){const r=ye.setFromMatrixPosition(n.matrixWorld),e=ke.setFromMatrixPosition(o.matrixWorld),c=r.sub(e),u=o.getWorldDirection(Nt);return c.angleTo(u)>Math.PI/2}function Ht(n,o,r,e){const c=ye.setFromMatrixPosition(n.matrixWorld),u=c.clone();u.project(o),r.setFromCamera(u,o);const v=r.intersectObjects(e,!0);if(v.length){const l=v[0].distance;return c.distanceTo(r.ray.origin)<l}return!0}function Yt(n,o){if(o instanceof ge)return o.zoom;if(o instanceof Ee){const r=ye.setFromMatrixPosition(n.matrixWorld),e=ke.setFromMatrixPosition(o.matrixWorld),c=o.fov*Math.PI/180,u=r.distanceTo(e);return 1/(2*Math.tan(c/2)*u)}else return 1}function Wt(n,o,r){if(o instanceof Ee||o instanceof ge){const e=ye.setFromMatrixPosition(n.matrixWorld),c=ke.setFromMatrixPosition(o.matrixWorld),u=e.distanceTo(c),v=(r[1]-r[0])/(o.far-o.near),l=r[1]-v*o.far;return Math.round(v*u+l)}}const Ie=n=>Math.abs(n)<1e-10?0:n;function nt(n,o,r=""){let e="matrix3d(";for(let c=0;c!==16;c++)e+=Ie(o[c]*n.elements[c])+(c!==15?",":")");return r+e}const Ut=(n=>o=>nt(o,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Zt=(n=>(o,r)=>nt(o,n(r),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Bt(n){return n&&typeof n=="object"&&"current"in n}const Xt=s.forwardRef(({children:n,eps:o=.001,style:r,className:e,prepend:c,center:u,fullscreen:v,portal:l,distanceFactor:a,sprite:R=!1,transform:f=!1,occlude:b,onOcclude:F,castShadow:_,receiveShadow:L,material:C,geometry:j,zIndexRange:S=[16777271,0],calculatePosition:E=kt,as:D="div",wrapperClass:T,pointerEvents:y="auto",...h},z)=>{const{gl:p,camera:g,scene:B,size:w,raycaster:oe,events:ie,viewport:le}=te(),[O]=s.useState(()=>document.createElement(D)),Y=s.useRef(),M=s.useRef(null),ae=s.useRef(0),H=s.useRef([0,0]),k=s.useRef(null),q=s.useRef(null),I=(l==null?void 0:l.current)||ie.connected||p.domElement.parentNode,W=s.useRef(null),re=s.useRef(!1),ue=s.useMemo(()=>b&&b!=="blending"||Array.isArray(b)&&b.length&&Bt(b[0]),[b]);s.useLayoutEffect(()=>{const N=p.domElement;b&&b==="blending"?(N.style.zIndex=`${Math.floor(S[0]/2)}`,N.style.position="absolute",N.style.pointerEvents="none"):(N.style.zIndex=null,N.style.position=null,N.style.pointerEvents=null)},[b]),s.useLayoutEffect(()=>{if(M.current){const N=Y.current=pt(O);if(B.updateMatrixWorld(),f)O.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const x=E(M.current,g,w);O.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${x[0]}px,${x[1]}px,0);transform-origin:0 0;`}return I&&(c?I.prepend(O):I.appendChild(O)),()=>{I&&I.removeChild(O),N.unmount()}}},[I,f]),s.useLayoutEffect(()=>{T&&(O.className=T)},[T]);const Pe=s.useMemo(()=>f?{position:"absolute",top:0,left:0,width:w.width,height:w.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:u?"translate3d(-50%,-50%,0)":"none",...v&&{top:-w.height/2,left:-w.width/2,width:w.width,height:w.height},...r},[r,u,v,w,f]),we=s.useMemo(()=>({position:"absolute",pointerEvents:y}),[y]);s.useLayoutEffect(()=>{if(re.current=!1,f){var N;(N=Y.current)==null||N.render(s.createElement("div",{ref:k,style:Pe},s.createElement("div",{ref:q,style:we},s.createElement("div",{ref:z,className:e,style:r,children:n}))))}else{var x;(x=Y.current)==null||x.render(s.createElement("div",{ref:z,style:Pe,className:e,children:n}))}});const G=s.useRef(!0);Ge(N=>{if(M.current){g.updateMatrixWorld(),M.current.updateWorldMatrix(!0,!1);const x=f?H.current:E(M.current,g,w);if(f||Math.abs(ae.current-g.zoom)>o||Math.abs(H.current[0]-x[0])>o||Math.abs(H.current[1]-x[1])>o){const X=Ft(M.current,g);let U=!1;ue&&(b!=="blending"?U=[B]:Array.isArray(b)&&(U=b.map(V=>V.current)));const se=G.current;if(U){const V=Ht(M.current,g,oe,U);G.current=V&&!X}else G.current=!X;se!==G.current&&(F?F(!G.current):O.style.display=G.current?"block":"none");const fe=Math.floor(S[0]/2),je=b?ue?[S[0],fe]:[fe-1,0]:S;if(O.style.zIndex=`${Wt(M.current,g,je)}`,f){const[V,de]=[w.width/2,w.height/2],ce=g.projectionMatrix.elements[5]*de,{isOrthographicCamera:be,top:Ce,left:Se,bottom:xe,right:Me}=g,Le=Ut(g.matrixWorldInverse),De=be?`scale(${ce})translate(${Ie(-(Me+Se)/2)}px,${Ie((Ce+xe)/2)}px)`:`translateZ(${ce}px)`;let $=M.current.matrixWorld;R&&($=g.matrixWorldInverse.clone().transpose().copyPosition($).scale(M.current.scale),$.elements[3]=$.elements[7]=$.elements[11]=0,$.elements[15]=1),O.style.width=w.width+"px",O.style.height=w.height+"px",O.style.perspective=be?"":`${ce}px`,k.current&&q.current&&(k.current.style.transform=`${De}${Le}translate(${V}px,${de}px)`,q.current.style.transform=Zt($,1/((a||10)/400)))}else{const V=a===void 0?1:Yt(M.current,g)*a;O.style.transform=`translate3d(${x[0]}px,${x[1]}px,0) scale(${V})`}H.current=x,ae.current=g.zoom}}if(!ue&&W.current&&!re.current)if(f){if(k.current){const x=k.current.children[0];if(x!=null&&x.clientWidth&&x!=null&&x.clientHeight){const{isOrthographicCamera:X}=g;if(X||j)h.scale&&(Array.isArray(h.scale)?h.scale instanceof Z?W.current.scale.copy(h.scale.clone().divideScalar(1)):W.current.scale.set(1/h.scale[0],1/h.scale[1],1/h.scale[2]):W.current.scale.setScalar(1/h.scale));else{const U=(a||10)/400,se=x.clientWidth*U,fe=x.clientHeight*U;W.current.scale.set(se,fe,1)}re.current=!0}}}else{const x=O.children[0];if(x!=null&&x.clientWidth&&x!=null&&x.clientHeight){const X=1/le.factor,U=x.clientWidth*X,se=x.clientHeight*X;W.current.scale.set(U,se,1),re.current=!0}W.current.lookAt(N.camera.position)}});const pe=s.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return s.createElement("group",Re({},h,{ref:M}),b&&!ue&&s.createElement("mesh",{castShadow:_,receiveShadow:L,ref:W},j||s.createElement("planeGeometry",null),C||s.createElement("shaderMaterial",{side:bt,vertexShader:pe.vertexShader,fragmentShader:pe.fragmentShader})))});let ve=0;const Vt=vt(n=>(Te.onStart=(o,r,e)=>{n({active:!0,item:o,loaded:r,total:e,progress:(r-ve)/(e-ve)*100})},Te.onLoad=()=>{n({active:!1})},Te.onError=o=>n(r=>({errors:[...r.errors,o]})),Te.onProgress=(o,r,e)=>{r===e&&(ve=e),n({active:!0,item:o,loaded:r,total:e,progress:(r-ve)/(e-ve)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var $t=Object.defineProperty,Kt=(n,o,r)=>o in n?$t(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,d=(n,o,r)=>(Kt(n,typeof o!="symbol"?o+"":o,r),r);const qe=(n,o)=>(n%o+o)%o;let qt=class extends gt{constructor(o,r){super(),d(this,"object"),d(this,"domElement"),d(this,"enabled",!0),d(this,"target",new Z),d(this,"minDistance",0),d(this,"maxDistance",1/0),d(this,"minZoom",0),d(this,"maxZoom",1/0),d(this,"minPolarAngle",0),d(this,"maxPolarAngle",Math.PI),d(this,"minAzimuthAngle",-1/0),d(this,"maxAzimuthAngle",1/0),d(this,"enableDamping",!1),d(this,"dampingFactor",.05),d(this,"enableZoom",!0),d(this,"zoomSpeed",1),d(this,"enableRotate",!0),d(this,"rotateSpeed",1),d(this,"enablePan",!0),d(this,"panSpeed",1),d(this,"screenSpacePanning",!0),d(this,"keyPanSpeed",7),d(this,"autoRotate",!1),d(this,"autoRotateSpeed",2),d(this,"reverseOrbit",!1),d(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),d(this,"mouseButtons",{LEFT:he.ROTATE,MIDDLE:he.DOLLY,RIGHT:he.PAN}),d(this,"touches",{ONE:me.ROTATE,TWO:me.DOLLY_PAN}),d(this,"target0"),d(this,"position0"),d(this,"zoom0"),d(this,"_domElementKeyEvents",null),d(this,"getPolarAngle"),d(this,"getAzimuthalAngle"),d(this,"setPolarAngle"),d(this,"setAzimuthalAngle"),d(this,"getDistance"),d(this,"listenToKeyEvents"),d(this,"saveState"),d(this,"reset"),d(this,"update"),d(this,"connect"),d(this,"dispose"),this.object=o,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=t=>{let i=qe(t,2*Math.PI),m=f.phi;m<0&&(m+=2*Math.PI),i<0&&(i+=2*Math.PI);let P=Math.abs(i-m);2*Math.PI-P<P&&(i<m?i+=2*Math.PI:m+=2*Math.PI),b.phi=i-m,e.update()},this.setAzimuthalAngle=t=>{let i=qe(t,2*Math.PI),m=f.theta;m<0&&(m+=2*Math.PI),i<0&&(i+=2*Math.PI);let P=Math.abs(i-m);2*Math.PI-P<P&&(i<m?i+=2*Math.PI:m+=2*Math.PI),b.theta=i-m,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",Me),this._domElementKeyEvents=t},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(c),e.update(),a=l.NONE},this.update=(()=>{const t=new Z,i=new We().setFromUnitVectors(o.up,new Z(0,1,0)),m=i.clone().invert(),P=new Z,A=new We,Q=2*Math.PI;return function(){const Ye=e.object.position;t.copy(Ye).sub(e.target),t.applyQuaternion(i),f.setFromVector3(t),e.autoRotate&&a===l.NONE&&oe(B()),e.enableDamping?(f.theta+=b.theta*e.dampingFactor,f.phi+=b.phi*e.dampingFactor):(f.theta+=b.theta,f.phi+=b.phi);let J=e.minAzimuthAngle,ee=e.maxAzimuthAngle;return isFinite(J)&&isFinite(ee)&&(J<-Math.PI?J+=Q:J>Math.PI&&(J-=Q),ee<-Math.PI?ee+=Q:ee>Math.PI&&(ee-=Q),J<=ee?f.theta=Math.max(J,Math.min(ee,f.theta)):f.theta=f.theta>(J+ee)/2?Math.max(J,f.theta):Math.min(ee,f.theta)),f.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=F,f.radius=Math.max(e.minDistance,Math.min(e.maxDistance,f.radius)),e.enableDamping===!0?e.target.addScaledVector(_,e.dampingFactor):e.target.add(_),t.setFromSpherical(f),t.applyQuaternion(m),Ye.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(b.theta*=1-e.dampingFactor,b.phi*=1-e.dampingFactor,_.multiplyScalar(1-e.dampingFactor)):(b.set(0,0,0),_.set(0,0,0)),F=1,L||P.distanceToSquared(e.object.position)>R||8*(1-A.dot(e.object.quaternion))>R?(e.dispatchEvent(c),P.copy(e.object.position),A.copy(e.object.quaternion),L=!1,!0):!1}})(),this.connect=t=>{t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",$),e.domElement.addEventListener("pointerdown",V),e.domElement.addEventListener("pointercancel",be),e.domElement.addEventListener("wheel",xe)},this.dispose=()=>{var t,i,m,P,A,Q;(t=e.domElement)==null||t.removeEventListener("contextmenu",$),(i=e.domElement)==null||i.removeEventListener("pointerdown",V),(m=e.domElement)==null||m.removeEventListener("pointercancel",be),(P=e.domElement)==null||P.removeEventListener("wheel",xe),(A=e.domElement)==null||A.ownerDocument.removeEventListener("pointermove",de),(Q=e.domElement)==null||Q.ownerDocument.removeEventListener("pointerup",ce),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Me)};const e=this,c={type:"change"},u={type:"start"},v={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=l.NONE;const R=1e-6,f=new Ue,b=new Ue;let F=1;const _=new Z;let L=!1;const C=new K,j=new K,S=new K,E=new K,D=new K,T=new K,y=new K,h=new K,z=new K,p=[],g={};function B(){return 2*Math.PI/60/60*e.autoRotateSpeed}function w(){return Math.pow(.95,e.zoomSpeed)}function oe(t){e.reverseOrbit?b.theta+=t:b.theta-=t}function ie(t){e.reverseOrbit?b.phi+=t:b.phi-=t}const le=(()=>{const t=new Z;return function(m,P){t.setFromMatrixColumn(P,0),t.multiplyScalar(-m),_.add(t)}})(),O=(()=>{const t=new Z;return function(m,P){e.screenSpacePanning===!0?t.setFromMatrixColumn(P,1):(t.setFromMatrixColumn(P,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(m),_.add(t)}})(),Y=(()=>{const t=new Z;return function(m,P){const A=e.domElement;if(A&&e.object instanceof Ee&&e.object.isPerspectiveCamera){const Q=e.object.position;t.copy(Q).sub(e.target);let Oe=t.length();Oe*=Math.tan(e.object.fov/2*Math.PI/180),le(2*m*Oe/A.clientHeight,e.object.matrix),O(2*P*Oe/A.clientHeight,e.object.matrix)}else A&&e.object instanceof ge&&e.object.isOrthographicCamera?(le(m*(e.object.right-e.object.left)/e.object.zoom/A.clientWidth,e.object.matrix),O(P*(e.object.top-e.object.bottom)/e.object.zoom/A.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function M(t){e.object instanceof Ee&&e.object.isPerspectiveCamera?F/=t:e.object instanceof ge&&e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*t)),e.object.updateProjectionMatrix(),L=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ae(t){e.object instanceof Ee&&e.object.isPerspectiveCamera?F*=t:e.object instanceof ge&&e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/t)),e.object.updateProjectionMatrix(),L=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function H(t){C.set(t.clientX,t.clientY)}function k(t){y.set(t.clientX,t.clientY)}function q(t){E.set(t.clientX,t.clientY)}function I(t){j.set(t.clientX,t.clientY),S.subVectors(j,C).multiplyScalar(e.rotateSpeed);const i=e.domElement;i&&(oe(2*Math.PI*S.x/i.clientHeight),ie(2*Math.PI*S.y/i.clientHeight)),C.copy(j),e.update()}function W(t){h.set(t.clientX,t.clientY),z.subVectors(h,y),z.y>0?M(w()):z.y<0&&ae(w()),y.copy(h),e.update()}function re(t){D.set(t.clientX,t.clientY),T.subVectors(D,E).multiplyScalar(e.panSpeed),Y(T.x,T.y),E.copy(D),e.update()}function ue(t){t.deltaY<0?ae(w()):t.deltaY>0&&M(w()),e.update()}function Pe(t){let i=!1;switch(t.code){case e.keys.UP:Y(0,e.keyPanSpeed),i=!0;break;case e.keys.BOTTOM:Y(0,-e.keyPanSpeed),i=!0;break;case e.keys.LEFT:Y(e.keyPanSpeed,0),i=!0;break;case e.keys.RIGHT:Y(-e.keyPanSpeed,0),i=!0;break}i&&(t.preventDefault(),e.update())}function we(){if(p.length==1)C.set(p[0].pageX,p[0].pageY);else{const t=.5*(p[0].pageX+p[1].pageX),i=.5*(p[0].pageY+p[1].pageY);C.set(t,i)}}function G(){if(p.length==1)E.set(p[0].pageX,p[0].pageY);else{const t=.5*(p[0].pageX+p[1].pageX),i=.5*(p[0].pageY+p[1].pageY);E.set(t,i)}}function pe(){const t=p[0].pageX-p[1].pageX,i=p[0].pageY-p[1].pageY,m=Math.sqrt(t*t+i*i);y.set(0,m)}function N(){e.enableZoom&&pe(),e.enablePan&&G()}function x(){e.enableZoom&&pe(),e.enableRotate&&we()}function X(t){if(p.length==1)j.set(t.pageX,t.pageY);else{const m=Ae(t),P=.5*(t.pageX+m.x),A=.5*(t.pageY+m.y);j.set(P,A)}S.subVectors(j,C).multiplyScalar(e.rotateSpeed);const i=e.domElement;i&&(oe(2*Math.PI*S.x/i.clientHeight),ie(2*Math.PI*S.y/i.clientHeight)),C.copy(j)}function U(t){if(p.length==1)D.set(t.pageX,t.pageY);else{const i=Ae(t),m=.5*(t.pageX+i.x),P=.5*(t.pageY+i.y);D.set(m,P)}T.subVectors(D,E).multiplyScalar(e.panSpeed),Y(T.x,T.y),E.copy(D)}function se(t){const i=Ae(t),m=t.pageX-i.x,P=t.pageY-i.y,A=Math.sqrt(m*m+P*P);h.set(0,A),z.set(0,Math.pow(h.y/y.y,e.zoomSpeed)),M(z.y),y.copy(h)}function fe(t){e.enableZoom&&se(t),e.enablePan&&U(t)}function je(t){e.enableZoom&&se(t),e.enableRotate&&X(t)}function V(t){var i,m;e.enabled!==!1&&(p.length===0&&((i=e.domElement)==null||i.ownerDocument.addEventListener("pointermove",de),(m=e.domElement)==null||m.ownerDocument.addEventListener("pointerup",ce)),ot(t),t.pointerType==="touch"?Le(t):Ce(t))}function de(t){e.enabled!==!1&&(t.pointerType==="touch"?De(t):Se(t))}function ce(t){var i,m,P;Fe(t),p.length===0&&((i=e.domElement)==null||i.releasePointerCapture(t.pointerId),(m=e.domElement)==null||m.ownerDocument.removeEventListener("pointermove",de),(P=e.domElement)==null||P.ownerDocument.removeEventListener("pointerup",ce)),e.dispatchEvent(v),a=l.NONE}function be(t){Fe(t)}function Ce(t){let i;switch(t.button){case 0:i=e.mouseButtons.LEFT;break;case 1:i=e.mouseButtons.MIDDLE;break;case 2:i=e.mouseButtons.RIGHT;break;default:i=-1}switch(i){case he.DOLLY:if(e.enableZoom===!1)return;k(t),a=l.DOLLY;break;case he.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;q(t),a=l.PAN}else{if(e.enableRotate===!1)return;H(t),a=l.ROTATE}break;case he.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;H(t),a=l.ROTATE}else{if(e.enablePan===!1)return;q(t),a=l.PAN}break;default:a=l.NONE}a!==l.NONE&&e.dispatchEvent(u)}function Se(t){if(e.enabled!==!1)switch(a){case l.ROTATE:if(e.enableRotate===!1)return;I(t);break;case l.DOLLY:if(e.enableZoom===!1)return;W(t);break;case l.PAN:if(e.enablePan===!1)return;re(t);break}}function xe(t){e.enabled===!1||e.enableZoom===!1||a!==l.NONE&&a!==l.ROTATE||(t.preventDefault(),e.dispatchEvent(u),ue(t),e.dispatchEvent(v))}function Me(t){e.enabled===!1||e.enablePan===!1||Pe(t)}function Le(t){switch(He(t),p.length){case 1:switch(e.touches.ONE){case me.ROTATE:if(e.enableRotate===!1)return;we(),a=l.TOUCH_ROTATE;break;case me.PAN:if(e.enablePan===!1)return;G(),a=l.TOUCH_PAN;break;default:a=l.NONE}break;case 2:switch(e.touches.TWO){case me.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;N(),a=l.TOUCH_DOLLY_PAN;break;case me.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;x(),a=l.TOUCH_DOLLY_ROTATE;break;default:a=l.NONE}break;default:a=l.NONE}a!==l.NONE&&e.dispatchEvent(u)}function De(t){switch(He(t),a){case l.TOUCH_ROTATE:if(e.enableRotate===!1)return;X(t),e.update();break;case l.TOUCH_PAN:if(e.enablePan===!1)return;U(t),e.update();break;case l.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;fe(t),e.update();break;case l.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;je(t),e.update();break;default:a=l.NONE}}function $(t){e.enabled!==!1&&t.preventDefault()}function ot(t){p.push(t)}function Fe(t){delete g[t.pointerId];for(let i=0;i<p.length;i++)if(p[i].pointerId==t.pointerId){p.splice(i,1);return}}function He(t){let i=g[t.pointerId];i===void 0&&(i=new K,g[t.pointerId]=i),i.set(t.pageX,t.pageY)}function Ae(t){const i=t.pointerId===p[0].pointerId?p[1]:p[0];return g[i.pointerId]}r!==void 0&&this.connect(r),this.update()}};const Gt=s.forwardRef(({makeDefault:n,camera:o,regress:r,domElement:e,enableDamping:c=!0,keyEvents:u=!1,onChange:v,onStart:l,onEnd:a,...R},f)=>{const b=te(h=>h.invalidate),F=te(h=>h.camera),_=te(h=>h.gl),L=te(h=>h.events),C=te(h=>h.setEvents),j=te(h=>h.set),S=te(h=>h.get),E=te(h=>h.performance),D=o||F,T=e||L.connected||_.domElement,y=s.useMemo(()=>new qt(D),[D]);return Ge(()=>{y.enabled&&y.update()},-1),s.useEffect(()=>(u&&y.connect(u===!0?T:u),y.connect(T),()=>void y.dispose()),[u,T,r,y,b]),s.useEffect(()=>{const h=g=>{b(),r&&E.regress(),v&&v(g)},z=g=>{l&&l(g)},p=g=>{a&&a(g)};return y.addEventListener("change",h),y.addEventListener("start",z),y.addEventListener("end",p),()=>{y.removeEventListener("start",z),y.removeEventListener("end",p),y.removeEventListener("change",h)}},[v,l,a,y,b,C]),s.useEffect(()=>{if(n){const h=S().controls;return j({controls:y}),()=>j({controls:h})}},[n,y]),s.createElement("primitive",Re({ref:f,object:y,enableDamping:c},R))}),Qt=()=>{const{progress:n}=Vt();return ne.jsxs(Xt,{children:[ne.jsx("span",{className:"canvas-load"}),ne.jsxs("p",{style:{fontSize:14,color:"#f1f1f1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},nn=({children:n})=>ne.jsxs(It,{className:"z-10 bg-color",shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,position:[-4,3,6],near:.01,far:1e4},onCreated:({gl:o})=>{o.setPixelRatio(window.devicePixelRatio)},children:[ne.jsx("hemisphereLight",{intensity:.1,groundColor:"black"}),ne.jsx("pointLight",{intensity:5}),ne.jsxs(s.Suspense,{fallback:ne.jsx(Qt,{}),children:[ne.jsx(Gt,{enableZoom:!1,autoRotate:!0,autoRotateSpeed:5,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),n]})]});export{nn as M};
